<html>
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
        <link rel="stylesheet" href="style2.css">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="carousel.css">
        <script src="carousel.js"></script>
        <title>CIBUS</title>
    </head>

    <body>
      <script>

      </script>
        <div id="page-container">
          <div id="content-wrap">
            <header>
              <nav>
                <a class="logo" href="destaque.html">CIBUS</a>
                <div class="mobile-menu">
                  <div class="line1"></div>
                  <div class="line2"></div>
                  <div class="line3"></div>
                </div>
                <ul class="nav-list">
                  <li><a href="destaque.html">Início</a></li>
                  <li><a href="teste.html">Sobre</a></li>
                  <li><a href="teste.html">Parceiros</a></li>
                  <li><a href="teste.html">Conta</a></li>
                </ul>
              </nav>
            </header>
          </div>
        <a href="destaque.html"><h1 class="titulo">Pesquisar produtos</h1></a>
        <div class="carousel-wrapper">
            <form>
                <label for="Nome do produto">
                  <span>Pesquisar produto: </span>
                  <input type="text" id="pesquisar" name="pesquisar" placeholder="Estou porcurando por....">
                </label>
                <button type="button" id="pesquisar-button" name="pesquisar-button" class="button-pesquisar" onclick="()=>{pesquisar()}">Pesquisar</button>
            </form><br>
            <div class="pesquisa-header">
                <h1 id="pesquisandoPor"></h1>
                <h3 id="valorPesquisa"></h3>
            </div>
            <div class="carousel-principal">
                <div class="box-principal">
                    <ul class="item-list" id="list-items" style="width: 100% !important;">
                    </ul>
                </div>
            </div>
        </div>

        <script>

            document.getElementById('pesquisar-button').addEventListener("click", () => {
              
              this.loadLista(document.getElementById('pesquisar').value);
    
            })
        
            function loadLista(valorPesquisa = '') {
    
              let lista = document.getElementById('list-items');
              let pesquisa = '';

              if (valorPesquisa != '') { pesquisa = valorPesquisa; }

              let produtos = [];

              lista.innerHTML = "";

              fetch("./products.json")
                .then(res => res.json())
                .then(data => {

                  produtos = data;

                  produtos.forEach(produto => {

                    if ((produto.title.toUpperCase()).includes(pesquisa.toUpperCase())) {

                    var descricao = (produto.description.length > 50) ? produto.description.substr(0, 50) + '...' : produto.description;                    

                    lista.innerHTML = lista.innerHTML + 
                      '<li class="item">' +
                        '<div class="item-box">'+
                          '<img src="' + produto.filename + '" class="item-image" height="225" width="225"><br>'+
                          '<h2>' + produto.title + '</h2>'+
                          '<div class="item-desc">'+
                            '<article>' + descricao + '</article>'+
                            '<span> Preço: R$ ' + produto.price + '</span><br>' +
                            '<span> Avalaiação: ' + produto.rating + '</span>' +
                            '<button class="item-button">Ver produto</button>'+
                          '</div>'+
                        '</div>'+
                      '</li>';
                      
                    }

                  })

                });
    
            }
    
            this.loadLista();
    
        </script>
     

     <footer id="footer">
       <div class="container-footer">
         <div class="row-footer">
           <!-- footer col-->
           <div class="footer-col">
             <h4>Empresa</h4>
             <ul>
               <li><a href="#"> Quem somos </a></li>
               <li><a href=""> nossos serviços </a></li>
               <li><a href=""> política de privacidade </a></li>
               <li><a href=""> programa de afiliados</a></li>
             </ul>
           </div>
           <!--end footer col-->
           <!-- footer col-->
           <div class="footer-col">
             <h4>Obter ajuda</h4>
             <ul>
               <li><a href="#">FAQ</a></li>
               <li><a href="#">Transporte</a></li>
               <li><a href="#">devoluções</a></li>
               <li><a href="#">Status De Pedido</a></li>
               <li><a href="#">Opções De Pagamento</a></li>
             </ul>
           </div>
           <!--end footer col-->
           <!-- footer col-->
           <div class="footer-col">
             <h4>Loja online</h4>
             <ul>
               <li><a href="#">Destaques</a></li>
               <li><a href="#">Catálogo completo</a></li>
               <li><a href="#">Cadastre-se</a></li>
               <li><a href="#">Endereço</a></li>
             </ul>
           </div>
           <!--end footer col-->
           <!-- footer col-->
         </div>
         <!--end footer col-->
       </div>
     </footer>
        </div>
    </body>
</html>